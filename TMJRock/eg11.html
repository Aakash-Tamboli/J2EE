<!DOCTYPE HTML>
<html lang='en'>
<head>
<meta charset='utf-8'>
<title>Modal Window On Click</title>
<style>
.modalMask
{
width:100%;
height:100%;
top:0;
left:0;
border:1px solid red;
background:gray;
position:fixed;
opacity:70%;
}

.modal
{
width:400px;
min-width:400px;
height:300px;
min-height:300px;
background-color:blue;
position:fixed;
top:0;
right:0;
bottom:0;
left:0;
margin:auto;
border:2px solid white;
overflow:auto;
}

.closeButton
{
float:right;
padding:2px 7px;
cursor:pointer;
}
</style>
<script>

var ds={
"modals":[]
};

var $$$={
"modals":{}
};

$$$.modals.show=function(mid)
{
let targetModal=null;
for(let i=0;i<ds.modals.length;i++)
{
if(ds.modals[i].getContentId()==mid)
{
targetModal=ds.modals[i];
break;
}
}
if(targetModal==null) return;
targetModal.show();
}

// following is a class
function Modal(crf)
{
var objectAddress=this;
this.onOpen=null;
this.onClose=null;
var contentReference=crf;


var modalMaskDivision=document.createElement("div");
modalMaskDivision.classList.add("modalMask");
var modalDivision=document.createElement("div");
modalDivision.classList.add("modal");
var headerDivision=document.createElement("div");
headerDivision.style.background="red"; // just for debug purpose
headerDivision.style.width="100%";
headerDivision.style.height="40px";
headerDivision.style.padding="5px";
modalDivision.appendChild(headerDivision);

var footerDivision=document.createElement("div");
footerDivision.style.background="pink";
footerDivision.style.width="100%";
footerDivision.style.height="40px";
footerDivision.style.position="absolute";
footerDivision.style.bottom="0";
footerDivision.style.padding="5px";

modalDivision.appendChild(footerDivision);




var closeButtonSpan=document.createElement("span");
closeButtonSpan.classList.add("closeButton");
var closeButtonMarker=document.createTextNode("x");
closeButtonSpan.appendChild(closeButtonMarker);

modalDivision.appendChild(closeButtonSpan);


contentReference.remove();
modalDivision.appendChild(contentReference);


if(contentReference.hasAttribute("size"))
{
var size=contentReference.getAttribute("size");
// alert("Size of: "+size);
let xPosition=size.indexOf("x");
if(xPosition==-1) xPosition=size.indexOf("X");
if(xPosition==-1) throw "TMJRock: Invalid Size Format Please Refere Official Docs";
if(xPosition==0 || xPosition==size.length-1) throw "TMJRock: Invalid Size Format Please Refere Official Docs";
let width=size.substring(0,xPosition);
let height=size.substring(xPosition+1);
// alert(modalDivision);
modalDivision.style.width=width+"px";
modalDivision.style.height=height+"px";
}
else
{
modalDivision.style.width="300px"; // setting if user not specifed
modalDivision.style.height="300px"; // setting if user not specified
}

alert(modalDivision.style.width+","+modalDivision.style.height);


if(contentReference.hasAttribute("header"))
{
var headerContent=contentReference.getAttribute("header");
// alert("Header Content: "+headerContent);
headerDivision.innerHTML=headerContent;
}

if(contentReference.hasAttribute("footer"))
{
var footerContent=contentReference.getAttribute("footer");
// alert("Footer Content: "+footerContent);
footerDivision.innerHTML=footerContent;
}

if(contentReference.hasAttribute("closeButton"))
{
var closeButton=contentReference.getAttribute("closeButton");
// alert("Close Button: "+closeButton);
}

if(contentReference.hasAttribute("maskColor"))
{
var maskColor=contentReference.getAttribute("maskColor");
// alert("Mask Color: "+maskColor);
}

if(contentReference.hasAttribute("modalBackgroundColor"))
{
var modalBackgroundColor=contentReference.getAttribute("modalBackgroundColor");
// alert("Modal Background Color: "+modalBackgroundColor);
}

if(contentReference.hasAttribute("onOpen"))
{
var onOpened=contentReference.getAttribute("onOpen");
// alert("on Opened Function Name: "+onOpened);
// alert(typeof onOpened); // because Its string it means Now, we have to exectute through eval() in-built function
eval(onOpened); // just for testing
someExperession="c=20+30";
// alert(someExperession);
eval(someExperession);
// alert(c);
}


if(contentReference.hasAttribute("onClose"))
{
var onClosed=contentReference.getAttribute("onClose");
// alert("on Closed Function Name: "+onClosed);
// alert(typeof onClosed);  // because Its string it means Now, we have to exectute through eval() in-built function
eval(onClosed); // just for testing
}


this.getContentId=function(){
return contentReference.id;
};

this.show=function(){
document.body.appendChild(modalMaskDivision);
document.body.appendChild(modalDivision);
if(this.onOpen) this.onOpen();
};

closeButtonSpan.onclick=function(){
modalDivision.remove();
modalMaskDivision.remove();
if(objectAddress.onClose) objectAddress.onClose();
};

}

// following is written by TMJRock user
function abOpened()
{
alert("Modal with ab opened");
}
function abClosed()
{
alert("Modal with ab close");
}

function createModal1()
{
$$$.modals.show("ab");
}


function createModal2()
{
$$$("pq").onOpen=function(){
alert("Modal with pq opened");
};
$$$("pq").onClose=function(){
alert("Modal with pq close");
};
$$$.modals.show("pq");
}

function loader()
{
var all=document.getElementsByTagName("*");
// alert(all.length);
for(let i=0;i<all.length;i++)
{
if(all[i].hasAttribute("forModal"))
{
if(all[i].getAttribute("forModal").toUpperCase()=="TRUE")
{
ds.modals.push(new Modal(all[i]));
i--;
}
}
}

}

window.addEventListener('load',loader);

</script>
</head>
<body>
<button type='button' onclick='createModal1()'>First Modal</button>
<button type='button' onclick='createModal2()'>Show Second Modal</button>
<div id='ab' forModal="true" contentId="ab" header="Some Heading" footer="Some footer" size="200X300" 
closeButton="false" maskColor="#33545" modalBackgroundColor="#5433" 
onOpen="abOpened()"
onClose="abClosed()"
>
God is Great
</div>

<div id='pq' forModal="true">
God is Known for Systamatic Miracle
</div>
</body>
</html>
